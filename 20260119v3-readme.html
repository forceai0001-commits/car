<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CP å€‰å„²è»Šè¼›é ç´„ç³»çµ±éƒ¨ç½²æ‰‹å†Š v2.0 | Canvas å°è®€ç‰ˆ</title>
    <style>
        /* --- åŸºç¤è¨­å®š (Reset & Variables) --- */
        :root {
            --g-blue: #4285F4;
            --g-red: #EA4335;
            --g-yellow: #FBBC05;
            --g-green: #34A853;
            --g-gray: #5f6368;
            --text-main: #202124;
            
            /* é è¨­èƒŒæ™¯è‰² (æœƒéš¨è§’è‰²æ”¹è®Š) */
            --bg-light: #f8f9fa;
            /* é è¨­è§’è‰²é¡è‰² (æœƒéš¨è§’è‰²æ”¹è®Š) */
            --role-color: var(--g-blue);
        }

        * { box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: var(--text-main);
            background-color: var(--bg-light); /* ä½¿ç”¨è®Šæ•¸ */
            margin: 0;
            padding: 0;
            padding-bottom: 60px; /* Footer space */
            transition: background-color 0.5s ease; /* èƒŒæ™¯è‰²åˆ‡æ›å‹•ç•« */
        }

        /* --- è§’è‰²ä¸»é¡Œå®šç¾© (æ ¸å¿ƒä¿®æ”¹) --- */
        /* Client: æ¥µæ·ºè— */
        body[data-role="client"] { 
            --role-color: var(--g-blue); 
            --bg-light: #f4f8fb; 
        }
        /* Partner: æ¥µæ·ºç´…/ç²‰ */
        body[data-role="partner"] { 
            --role-color: var(--g-red); 
            --bg-light: #fff8f8; 
        }
        /* Dev: æ¥µæ·ºç¶  */
        body[data-role="dev"] { 
            --role-color: var(--g-green); 
            --bg-light: #f6fbf6; 
        }

        /* --- ç‰ˆé¢é…ç½® (Layout) --- */
        .container {
            max-width: 1400px; /* åŠ å¯¬ç‰ˆé¢ä»¥å®¹ç´å´æ¬„ */
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 250px 1fr; /* å·¦å´æ¬„ 250pxï¼Œå³å…§å®¹è‡ªå‹•å¡«æ»¿ */
            gap: 40px;
            align-items: start; /* ç¢ºä¿å´æ¬„ Sticky ç”Ÿæ•ˆ */
        }

        /* æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; gap: 20px;}
            .sidebar { display: none; } /* æ‰‹æ©Ÿç‰ˆç°¡åŒ–ï¼Œéš±è—å´æ¬„ */
        }

        /* --- é ‚éƒ¨å°èˆª (Sticky Header) --- */
        .header {
            background: rgba(255, 255, 255, 0.95); /* å¾®é€æ˜ä»¥é€å‡ºåº•è‰² */
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 15px 20px;
            backdrop-filter: blur(5px);
        }
        .header-inner {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .brand { font-weight: bold; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }
        .brand span { color: var(--g-gray); font-size: 0.9rem; font-weight: normal; }

        /* --- èº«ä»½åˆ‡æ›å™¨ (Role Toggle) --- */
        .role-switcher {
            display: flex;
            background: rgba(0,0,0,0.05);
            border-radius: 25px;
            padding: 3px;
        }
        .role-btn {
            border: none;
            background: transparent;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            color: #666;
            transition: all 0.3s;
        }
        .role-btn.active {
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            color: var(--role-color);
        }

        /* --- å´é‚Šç›®éŒ„ (Sidebar) --- */
        .sidebar {
            position: sticky;
            top: 100px; /* è·é›¢é ‚éƒ¨ Header çš„ä½ç½® */
            max-height: calc(100vh - 120px);
            overflow-y: auto;
            border-right: 1px solid rgba(0,0,0,0.1); /* è¼•é‡åŒ–æ¡†ç·š */
            padding-right: 20px;
        }
        /* æ–°å¢ï¼šå´æ¬„èº«ä»½æç¤º */
        .role-indicator {
            background-color: white; /* ä¿æŒç™½è‰²ä»¥å‡¸é¡¯ */
            border: 1px solid rgba(0,0,0,0.1);
            border-left: 4px solid var(--role-color);
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #555;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }
        .role-indicator strong { display: block; color: var(--role-color); font-size: 1rem; margin-top: 4px; }

        .sidebar ul { list-style: none; padding: 0; margin: 0; }
        .sidebar li { margin-bottom: 8px; }
        .sidebar a { 
            display: block;
            text-decoration: none; 
            color: #666; 
            font-size: 0.95rem; 
            padding: 8px 12px;
            border-radius: 6px;
            transition: all 0.2s; 
        }
        .sidebar a:hover { background-color: rgba(0,0,0,0.05); color: var(--text-main); }
        .sidebar .active { 
            color: var(--role-color); 
            font-weight: bold; 
            background-color: white; /* Active æ”¹ç‚ºç™½è‰²èƒŒæ™¯ */
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        /* --- å°è®€æç¤ºå€ (Guide Box) --- */
        .guide-box {
            background-color: white;
            border-left: 5px solid var(--role-color);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            display: none; /* é è¨­éš±è—ï¼Œé€é JS æ§åˆ¶é¡¯ç¤º */
        }
        .guide-box.active { display: block; animation: fadeIn 0.5s; }
        .guide-title { font-weight: bold; color: var(--role-color); margin-bottom: 5px; display: block; }
        .guide-badge { 
            display: inline-block; padding: 2px 8px; border-radius: 4px; 
            font-size: 0.8rem; color: white; background: var(--role-color); margin-right: 5px; 
        }

        /* --- æ–°å¢ï¼šç« ç¯€å®šä½å¥ (Layer Context) --- */
        .layer-context {
            font-size: 1.05rem;
            color: #444;
            background: rgba(0,0,0,0.03);
            padding: 8px 12px;
            border-radius: 4px;
            border-left: 3px solid #999;
            margin-bottom: 20px;
            display: inline-block;
        }

        /* --- æ–°å¢ï¼šè­¦ç¤ºæ¡† (Small Warning) --- */
        .warning-box-sm {
            background: #fff3e0;
            border: 1px solid #ffe0b2;
            color: #e65100;
            padding: 10px 15px;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* --- æ–°å¢ï¼šå›å¾©é»æª¢æ ¸è¡¨ (Recovery Box) --- */
        .recovery-box {
            background: #fbe9e7;
            border: 1px dashed #ffab91;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }
        .recovery-title { color: #d84315; font-weight: bold; font-size: 0.95rem; margin-bottom: 8px; display: block; }
        .recovery-list { margin: 0; padding-left: 20px; color: #bf360c; font-size: 0.9rem; }

        /* --- å…§å®¹å€å¡Š (Content Sections) --- */
        main {
            min-width: 0; /* é˜²æ­¢ Grid Item å…§å®¹æº¢å‡º */
        }

        section {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-top: 4px solid transparent;
            scroll-margin-top: 100px; /* è®“éŒ¨é»å®šä½æ™‚ä¸æœƒè¢« Header æ“‹ä½ */
        }
        /* æ ¹æ“šæ¶æ§‹å±¤æ¬¡ä¸Šè‰² */
        section.layer-html { border-top-color: var(--g-blue); }
        section.layer-gas { border-top-color: var(--g-red); }
        section.layer-db { border-top-color: var(--g-green); }
        section.layer-general { border-top-color: var(--g-gray); }

        h2 { margin-top: 0; color: #202124; display: flex; align-items: center; justify-content: space-between; font-size: 1.8rem; margin-bottom: 15px; }
        .layer-tag { font-size: 0.8rem; padding: 4px 10px; border-radius: 12px; background: #eee; color: #555; font-weight: normal; white-space: nowrap; }
        
        .section-summary { font-size: 1.1rem; color: #5f6368; margin-bottom: 25px; font-weight: 500; border-bottom: 1px solid #eee; padding-bottom: 15px; }

        /* --- SVG ä½”ä½åœ–ç³»çµ± (SVG Placeholders) --- */
        .visual-container {
            display: grid;
            grid-template-columns: 2fr 1fr; /* ä¸»åœ– : è¼”åœ– */
            gap: 20px;
            margin: 30px 0;
        }
        @media (max-width: 768px) { .visual-container { grid-template-columns: 1fr; } }

        .svg-box {
            background: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 220px;
            position: relative;
            padding: 20px;
            text-align: center;
        }
        .svg-box svg { max-width: 100%; height: auto; margin-bottom: 10px; opacity: 0.8; }
        .svg-caption { font-size: 0.95rem; color: #444; font-weight: bold; margin-top: 12px; }
        .svg-intent { font-size: 0.85rem; color: #666; background: #eee; padding: 2px 8px; border-radius: 10px; margin-top: 5px; display: inline-block; }

        /* --- ç¨‹å¼ç¢¼éš±è—å€ (Code Snippets) --- */
        .code-placeholder {
            background: #2d2d2d;
            color: #ddd;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Consolas', monospace;
            font-size: 0.9rem;
            margin: 20px 0;
            position: relative;
            overflow-x: auto;
        }
        .code-placeholder::before {
            content: "CODE SNIPPET";
            position: absolute;
            top: 0; right: 0;
            background: #555;
            color: white;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 0 6px 0 6px;
        }

        /* --- ä¸‹è¼‰æŒ‰éˆ• --- */
        .btn-download {
            display: inline-block;
            background: var(--g-blue);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 4px;
            font-weight: bold;
            transition: background 0.2s;
        }
        .btn-download:hover { background: #3367d6; }
        .warning-text { color: var(--g-red); font-size: 0.9rem; margin-top: 10px; }

        /* --- FAQ èˆ‡ Details --- */
        details {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
            cursor: pointer;
        }
        summary { font-weight: bold; color: #444; font-size: 1.05rem; }
        .details-content { padding-top: 10px; color: #555; font-size: 0.95rem; padding-left: 20px; }
        .details-content ul, .details-content ol { padding-left: 20px; }

        /* --- Footer --- */
        footer {
            background: white; /* Footer æ”¹ç‚ºç™½è‰²ï¼Œèˆ‡å…§å®¹å€éš” */
            text-align: center;
            padding: 30px;
            color: #666;
            font-size: 0.85rem;
            margin-top: 60px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        .footer-note { display: block; margin-top: 5px; font-style: italic; color: #888; font-size: 0.8rem; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        /* æ ¹æ“šè§’è‰²é¡¯ç¤º/éš±è—ç‰¹å®šå…§å®¹ */
        .for-client, .for-partner, .for-dev { display: none; }
        body[data-role="client"] .for-client { display: block; }
        body[data-role="partner"] .for-partner { display: block; }
        body[data-role="dev"] .for-dev { display: block; }

    </style>
</head>
<body data-role="client">

    <!-- é ‚éƒ¨å°èˆª -->
    <header class="header">
        <div class="header-inner">
            <div class="brand">
                CP å€‰å„²é ç´„ç³»çµ± v2.0
                <span>| éƒ¨ç½²å°è®€æ‰‹å†Š</span>
            </div>
            
            <div class="role-switcher">
                <button class="role-btn active" onclick="setRole('client')" id="btn-client">å®¢æˆ¶ / æ±ºç­–è€…</button>
                <button class="role-btn" onclick="setRole('partner')" id="btn-partner">FALO å¤¥ä¼´ (å…§è¨“)</button>
                <button class="role-btn" onclick="setRole('dev')" id="btn-dev">æŠ€è¡“å¯¦ä½œè€…</button>
            </div>
        </div>
    </header>

    <div class="container">
        
        <!-- å·¦å´å°è¦½åˆ— (Sidebar) - Desktop Only -->
        <aside class="sidebar">
            <!-- æ–°å¢ï¼šèº«ä»½ç‹€æ…‹æç¤º -->
            <div class="role-indicator">
                ğŸ‘€ ç›®å‰é–±è®€èº«ä»½ï¼š
                <strong id="role-text">å®¢æˆ¶ / æ±ºç­–è€…</strong>
            </div>

            <h3 style="margin-top: 0; margin-bottom: 20px; color: #444; font-size: 1.1rem; border-bottom: 2px solid #eee; padding-bottom: 10px;">ç« ç¯€å°è¦½</h3>
            <ul>
                <li><a href="#sec-0" class="active">0. å…¥å£å°è®€</a></li>
                <li><a href="#sec-1">1. æ ¸å¿ƒç›®æ¨™èˆ‡åƒ¹å€¼</a></li>
                <li><a href="#sec-2">2. ä¸‰æ®µå¼æ¶æ§‹ç¸½è¦½</a></li>
                <li><a href="#sec-3">3. å‰ç«¯å±¤ (HTML)</a></li>
                <li><a href="#sec-4">4. é‚è¼¯å±¤ (GAS)</a></li>
                <li><a href="#sec-5">5. è³‡æ–™ç«¯ (Sheets)</a></li>
                <li><a href="#sec-6">6. éƒ¨ç½²è·¯ç·šåœ–</a></li>
                <li><a href="#sec-7">7. ä¸‹è¼‰è³‡æº</a></li>
                <li><a href="#sec-8">8. Roadmap</a></li>
            </ul>
        </aside>

        <!-- å³å´ä¸»è¦å…§å®¹å€ -->
        <main>

            <!-- CH 0: å…¥å£å°è®€ -->
            <section class="layer-general" id="sec-0">
                <h2>0. å°è®€æŒ‡å—ï¼šä½ è©²å¦‚ä½•ä½¿ç”¨é€™ä»½æ–‡ä»¶ï¼Ÿ <span class="layer-tag">å‰è¨€</span></h2>
                
                <!-- æ–°å¢ï¼šä»£ç¢¼è­¦ç¤º (å‰ç§») -->
                <div class="warning-box-sm">
                    âš ï¸ <b>æ³¨æ„ï¼š</b> æœ¬ Canvas åƒ…ç‚ºå°è®€èˆ‡æ¶æ§‹èªªæ˜é ï¼Œå®Œæ•´ç¨‹å¼ç¢¼èˆ‡é€æ­¥æ“ä½œè«‹åƒè€ƒè³‡æ–™åº•ç¨¿ï¼ˆdoc/pdf + åŠ å¯† zipï¼‰ã€‚
                </div>

                <!-- å‹•æ…‹å°è®€æ–‡å­— -->
                <div class="guide-box active for-client">
                    <span class="guide-title">ğŸ‘‹ çµ¦ ç‡Ÿé‹ç¸½ç›£ / å°ˆæ¡ˆç¶“ç†ï¼š</span>
                    é€™æ˜¯ä¸€ä»½å¯¦éš›è½åœ°æ–‡ä»¶ã€‚è«‹å°ˆæ³¨æ–¼ **ç¬¬ 1 ç«  (æ•ˆç›Šèˆ‡é¢¨éšª)** èˆ‡ **ç¬¬ 6 ç«  (æ“ä½œæ‰‹å†Š)**ã€‚æŠ€è¡“ç´°ç¯€å¯ä»¥ç•¥éï¼Œé‡é»æ˜¯äº†è§£ã€Œç³»çµ±èƒ½åšä»€éº¼ã€ä»¥åŠã€Œå¦‚ä½•æ²»ç†ã€ã€‚
                </div>
                <div class="guide-box for-partner">
                    <span class="guide-title">ğŸ‘‹ çµ¦ FALO å¤¥ä¼´ / æ¶æ§‹å¸«å­¸å“¡ï¼š</span>
                    é€™æ˜¯ä¸€ä»½æ•™ææ¯ç¨¿ã€‚è«‹è§€å¯Ÿæˆ‘å€‘å¦‚ä½•ç”¨ã€Œä¸‰æ®µå¼æ¶æ§‹ã€ä¾†è§£æ§‹éœ€æ±‚ã€‚è«‹ç‰¹åˆ¥ç•™æ„æ¨™æœ‰ **ã€FALO å…§è¨“é‡é»ã€‘** çš„å€å¡Šï¼Œé‚£æ˜¯æ¶æ§‹è¨­è¨ˆçš„éˆé­‚ã€‚
                </div>
                <div class="guide-box for-dev">
                    <span class="guide-title">ğŸ‘‹ çµ¦ é–‹ç™¼è€… / å¯¦ä½œè€…ï¼š</span>
                    é€™æ˜¯ä¸€ä»½è¦æ ¼æ›¸ã€‚é€™ä¸æ˜¯å®Œæ•´çš„ç¨‹å¼ç¢¼åº«ï¼Œä½†åŒ…å«äº† **Schemaã€API Spec èˆ‡ é—œéµé‚è¼¯**ã€‚è«‹é‡é»é–±è®€ **ç¬¬ 3, 4, 5 ç« ** ä¸¦åƒè€ƒåº•ç¨¿ä¸­çš„å®Œæ•´ Codeã€‚
                </div>

                <div class="visual-container">
                    <div class="svg-box">
                        <svg width="200" height="100" viewBox="0 0 200 100">
                            <rect x="10" y="10" width="60" height="80" fill="#E3F2FD" stroke="#4285F4" rx="5"/>
                            <text x="40" y="55" text-anchor="middle" font-size="10" fill="#4285F4">Client View</text>
                            
                            <rect x="70" y="10" width="60" height="80" fill="#FCE4EC" stroke="#EA4335" rx="5"/>
                            <text x="100" y="55" text-anchor="middle" font-size="10" fill="#EA4335">Partner View</text>
                            
                            <rect x="130" y="10" width="60" height="80" fill="#E8F5E9" stroke="#34A853" rx="5"/>
                            <text x="160" y="55" text-anchor="middle" font-size="10" fill="#34A853">Tech View</text>
                        </svg>
                        <div class="svg-caption">SVG 01: ä¸‰é‡è¦–è§’æ–‡ä»¶</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šåŒä¸€ä»½æ–‡ä»¶å¦‚ä½•æœå‹™ä¸åŒåˆ©å®³é—œä¿‚äºº</div>
                    </div>
                </div>
            </section>

            <!-- CH 1: æ–‡ä»¶å®šä½ -->
            <section class="layer-general" id="sec-1">
                <h2>1. æ ¸å¿ƒç›®æ¨™èˆ‡åƒ¹å€¼ <span class="layer-tag">Overview</span></h2>
                <div class="section-summary">30åˆ†é˜å…§å®Œæˆã€Œå¯é‹ä½œã€å¯é©—è­‰ã€å¯æ‰¿æ“”åŸºæœ¬ç‡Ÿé‹ã€çš„ POC/MVPã€‚</div>

                <div class="for-client">
                    <h3>ç‚ºä»€éº¼éœ€è¦é€™å€‹ç³»çµ±ï¼Ÿ</h3>
                    <p>è§£æ±ºç—›é»ï¼šè»Šè¼›ç„¡é è­¦åˆ°å ´å°è‡´å£…å¡ã€äººå·¥æ’ç¨‹è³‡è¨Šä¸é€æ˜ã€‚</p>
                    <p>æ ¸å¿ƒåƒ¹å€¼ï¼š<b>ç„¡éœ€ä¼ºæœå™¨ç¶­è­·ã€å³åˆ»å¯ç”¨ã€‚</b></p>
                    <details open>
                        <summary>é¢¨éšªæ§ç®¡ (Manager's View)</summary>
                        <div class="details-content">
                            <ul>
                                <li><b>è³‡æ–™å®‰å…¨ï¼š</b>å…§å»ºä¸€éµå‚™ä»½ã€ç‰ˆæœ¬é‚„åŸã€‚</li>
                                <li><b>ä½µç™¼è¡çªï¼š</b>å¾Œç«¯å¯¦ä½œ LockService æ’éšŠé–ã€‚</li>
                                <li><b>ç‡Ÿé‹æŒçºŒï¼š</b>è‹¥ Google ç•°å¸¸ï¼Œå¯ç„¡ç¸«é™ç´šç‚ºäººå·¥æ“ä½œ Sheetã€‚</li>
                            </ul>
                        </div>
                    </details>
                </div>

                <div class="for-partner">
                    <h3>FALO æ–¹æ³•è«–ï¼šMVP çš„ç²¾é«“</h3>
                    <p>æœ¬ç³»çµ±é«”ç¾äº† FALO å››å¤§æ”¯æŸ±ï¼š</p>
                    <ul>
                        <li><b>Fast (å¿«)ï¼š</b>Serverless å„ªå‹¢ï¼Œ20åˆ†é˜ä¸Šç·šã€‚</li>
                        <li><b>Auditable (å¯ç¨½æ ¸)ï¼š</b>è³‡æ–™åº«å³ä»‹é¢ï¼ŒSheet è®“æ•¸æ“šé€æ˜åŒ–ã€‚</li>
                        <li><b>Low-code (ä½ä»£ç¢¼)ï¼š</b>åªåœ¨é—œéµé‚è¼¯å¯« Codeï¼Œä»‹é¢ç”¨ç¾æˆå·¥å…·ã€‚</li>
                        <li><b>Organized (æœ‰çµ„ç¹”)ï¼š</b>æ¨™æº–æ±  (STD) èˆ‡ å°ˆæ¡ˆæ±  (PROJ) çš„åˆ†æµæ²»ç†ã€‚</li>
                    </ul>
                </div>
            </section>

            <!-- CH 2: ä¸‰æ®µå¼æ¶æ§‹ç¸½è¦½ -->
            <section class="layer-general" id="sec-2">
                <h2>2. ä¸‰æ®µå¼æ¶æ§‹ç¸½è¦½ <span class="layer-tag">Architecture</span></h2>
                <div class="section-summary">HTML (UI) â†” GAS (Logic) â†” Sheets (DB)</div>

                <div class="guide-box active">
                    <span class="guide-badge">é‡è¦</span>
                    é€™æ˜¯æœ¬æ•™æçš„æ ¸å¿ƒæ¶æ§‹ã€‚è«‹ç†è§£é€™ä¸‰å±¤æ˜¯å¦‚ä½•ã€Œè§£è€¦ (Decoupling)ã€çš„ã€‚
                </div>

                <div class="visual-container">
                    <!-- ä¸»åœ–ï¼šæ¶æ§‹å…¨è²Œ -->
                    <div class="svg-box" style="flex: 2;">
                        <svg width="400" height="150" viewBox="0 0 400 150">
                            <!-- å‰ç«¯ -->
                            <rect x="20" y="40" width="80" height="80" rx="10" fill="#E3F2FD" stroke="#4285F4" stroke-width="2"/>
                            <text x="60" y="85" text-anchor="middle" font-size="12" fill="#1565C0" font-weight="bold">å‰ç«¯ HTML</text>
                            
                            <!-- ä¸­é–“ç«¯ -->
                            <rect x="160" y="40" width="80" height="80" rx="10" fill="#FFF3E0" stroke="#E65100" stroke-width="2"/>
                            <text x="200" y="85" text-anchor="middle" font-size="12" fill="#E65100" font-weight="bold">GAS é‚è¼¯å±¤</text>
                            
                            <!-- DB -->
                            <rect x="300" y="40" width="80" height="80" rx="10" fill="#E8F5E9" stroke="#2E7D32" stroke-width="2"/>
                            <text x="340" y="85" text-anchor="middle" font-size="12" fill="#2E7D32" font-weight="bold">Sheets DB</text>

                            <!-- é€£æ¥ç·š -->
                            <line x1="100" y1="80" x2="160" y2="80" stroke="#666" stroke-width="2"/>
                            <text x="130" y="70" text-anchor="middle" font-size="10" fill="#666">JSON/POST</text>

                            <line x1="240" y1="80" x2="300" y2="80" stroke="#666" stroke-width="2"/>
                            <text x="270" y="70" text-anchor="middle" font-size="10" fill="#666">API Call</text>
                        </svg>
                        <div class="svg-caption">SVG 02: ä¸‰æ®µå¼æ¶æ§‹åœ–</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šç‚ºä»€éº¼å‰ç«¯èˆ‡è³‡æ–™åº«ä¹‹é–“ä¸€å®šè¦éš”ä¸€å±¤</div>
                    </div>
                    
                    <!-- è¼”åœ–ï¼šæ•¸æ“šæµ -->
                    <div class="svg-box" style="flex: 1;">
                        <svg width="150" height="150" viewBox="0 0 150 150">
                             <circle cx="75" cy="75" r="60" fill="none" stroke="#FBBC05" stroke-width="2" stroke-dasharray="5,5"/>
                             <text x="75" y="65" text-anchor="middle" font-size="10">Flow</text>
                             <text x="75" y="85" text-anchor="middle" font-size="10">User â†’ Bot â†’ Data</text>
                        </svg>
                        <div class="svg-caption">SVG 03: è³‡æ–™æµå‘</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šè³‡æ–™å¦‚ä½•å¾ä½¿ç”¨è€…æµå‘è³‡æ–™åº«</div>
                    </div>
                </div>

                <div class="for-partner for-dev">
                    <p><b>è¨­è¨ˆå“²å­¸ï¼š</b></p>
                    <ul>
                        <li><b>å‰ç«¯ (Client)ï¼š</b>è² è²¬ã€Œå’Œäººå°è©±ã€ã€‚Vue3 å–®æª”ï¼Œè„«é›¢ Google ç™»å…¥é™åˆ¶ã€‚</li>
                        <li><b>ä¸­é–“ç«¯ (Middleware)ï¼š</b>è² è²¬ã€Œé‚è¼¯èˆ‡å®‰å…¨ã€ã€‚äº¤é€šè­¦å¯Ÿï¼Œè™•ç†æ’éšŠé–ã€‚</li>
                        <li><b>è³‡æ–™ç«¯ (DB)ï¼š</b>è² è²¬ã€Œè¨˜æ†¶èˆ‡æ²»ç†ã€ã€‚é€æ˜åŒ–è³‡æ–™åº«ï¼Œçœä¸‹ Admin UI é–‹ç™¼æˆæœ¬ã€‚</li>
                    </ul>
                </div>
            </section>

            <!-- CH 3: å‰ç«¯ (HTML) -->
            <section class="layer-html" id="sec-3">
                <h2>3. å‰ç«¯å±¤ï¼šHTML + Vue3 <span class="layer-tag">Frontend</span></h2>
                <!-- æ–°å¢ï¼šå®šä½å¥ -->
                <p class="layer-context">ğŸ“ ä½ ç¾åœ¨åœ¨ã€Œå‰ç«¯å±¤ã€ï¼šåªè™•ç†äººæ©Ÿäº’å‹•ï¼Œä¸è™•ç†ä»»ä½•å•†æ¥­é‚è¼¯</p>
                
                <div class="section-summary">ç„¡é ˆç·¨è­¯ã€å–®ä¸€æª”æ¡ˆã€RWD ä»‹é¢ã€‚</div>

                <div class="visual-container">
                    <div class="svg-box">
                        <svg width="250" height="150" viewBox="0 0 250 150">
                            <rect x="50" y="20" width="150" height="110" fill="white" stroke="#333" stroke-width="2"/>
                            <rect x="60" y="30" width="130" height="20" fill="#4285F4"/>
                            <rect x="60" y="60" width="130" height="10" fill="#eee"/>
                            <rect x="60" y="80" width="130" height="10" fill="#eee"/>
                            <rect x="60" y="100" width="60" height="20" fill="#34A853"/>
                        </svg>
                        <div class="svg-caption">SVG 04: UI Mockup</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šå‰ç«¯åªè² è²¬é¡¯ç¤ºèˆ‡é€å‡ºï¼Œä¸å«å•†æ¥­é‚è¼¯</div>
                    </div>
                    <div class="svg-box">
                        <svg width="150" height="150" viewBox="0 0 150 150">
                             <text x="75" y="40" text-anchor="middle" font-size="10">{ "action": "create",</text>
                             <text x="75" y="60" text-anchor="middle" font-size="10">"payload": { ... } }</text>
                             <rect x="30" y="20" width="90" height="60" fill="none" stroke="#666" rx="5"/>
                             <path d="M75 90 L75 130" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
                        </svg>
                        <div class="svg-caption">SVG 05: JSON Payload</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šå‰å¾Œç«¯æºé€šçš„æ¨™æº–æ ¼å¼</div>
                    </div>
                </div>

                <div class="for-dev">
                    <details open>
                        <summary>é—œéµæŠ€è¡“é»</summary>
                        <div class="details-content">
                            <ul>
                                <li><b>API_URL Bindingï¼š</b>å‰ç«¯å”¯ä¸€éœ€è¦ä¿®æ”¹çš„è®Šæ•¸ï¼ŒæŒ‡å‘ GAS WebApp URLã€‚</li>
                                <li><b>Fetch APIï¼š</b>ä½¿ç”¨æ¨™æº– POST æ–¹æ³•å‚³é€ JSONã€‚</li>
                                <li><b>Vue3 CDNï¼š</b>ä¸ä½¿ç”¨ Webpack/Viteï¼Œç›´æ¥å¼•å…¥ CDNï¼Œä¿æŒå–®æª”å¯æ”œæ€§ã€‚</li>
                            </ul>
                        </div>
                    </details>
                </div>
            </section>

            <!-- CH 4: ä¸­é–“ç«¯ (GAS) -->
            <section class="layer-gas" id="sec-4">
                <h2>4. é‚è¼¯å±¤ï¼šGoogle Apps Script <span class="layer-tag">Middleware</span></h2>
                <!-- æ–°å¢ï¼šå®šä½å¥ -->
                <p class="layer-context">ğŸ“ ä½ ç¾åœ¨åœ¨ã€Œä¸­é–“å±¤ã€ï¼šæ‰€æœ‰è¦å‰‡ã€é©—è­‰ã€åˆ†æµéƒ½é›†ä¸­åœ¨é€™ä¸€å±¤</p>

                <div class="section-summary">Serverless çš„æ ¸å¿ƒå¤§è…¦ï¼Œè™•ç† Action åˆ†æ´¾èˆ‡é–å®šæ©Ÿåˆ¶ã€‚</div>

                <div class="visual-container">
                    <div class="svg-box">
                        <svg width="300" height="120" viewBox="0 0 300 120">
                            <rect x="20" y="20" width="60" height="80" fill="#FFF3E0" stroke="#E65100"/>
                            <text x="50" y="65" text-anchor="middle" font-size="10">doPost()</text>
                            
                            <path d="M80 60 L120 60" stroke="#333" stroke-width="2"/>
                            
                            <rect x="120" y="20" width="60" height="80" fill="#FFF3E0" stroke="#E65100"/>
                            <text x="150" y="55" text-anchor="middle" font-size="10">Router</text>
                            <text x="150" y="75" text-anchor="middle" font-size="8">(Switch)</text>
                            
                            <path d="M180 60 L220 30" stroke="#333" stroke-width="2"/>
                            <path d="M180 60 L220 90" stroke="#333" stroke-width="2"/>
                            
                            <text x="250" y="35" font-size="10">Action A</text>
                            <text x="250" y="95" font-size="10">Action B</text>
                        </svg>
                        <div class="svg-caption">SVG 06: è·¯ç”±å™¨ (Router) æ¨¡å¼</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šç‚ºä»€éº¼æ‰€æœ‰è«‹æ±‚éƒ½è¦èµ° doPost çµ±ä¸€å…¥å£</div>
                    </div>
                    <div class="svg-box">
                        <svg width="150" height="120" viewBox="0 0 150 120">
                            <rect x="40" y="20" width="70" height="20" fill="#ffcccb" stroke="#d32f2f"/>
                            <text x="75" y="35" text-anchor="middle" font-size="10">LockService</text>
                            <rect x="40" y="50" width="70" height="50" fill="#e0f2f1" stroke="#00695c"/>
                            <text x="75" y="75" text-anchor="middle" font-size="10">Critical Section</text>
                        </svg>
                        <div class="svg-caption">SVG 07: æ’éšŠé– (Lock)</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šç³»çµ±å¦‚ä½•é˜²æ­¢å¤šäººåŒæ™‚æ¶å–®</div>
                    </div>
                </div>

                <div class="for-dev for-partner">
                    <div class="code-placeholder">
                        function doPost(e) {<br>
                        &nbsp;&nbsp;const lock = LockService.getScriptLock();<br>
                        &nbsp;&nbsp;lock.tryLock(10000); // é—œéµï¼šé¿å… Race Condition<br>
                        &nbsp;&nbsp;// ... Router Logic ...<br>
                        }
                    </div>
                </div>
            </section>

            <!-- CH 5: è³‡æ–™ç«¯ (Sheets) -->
            <section class="layer-db" id="sec-5">
                <h2>5. è³‡æ–™ç«¯ï¼šGoogle Sheets <span class="layer-tag">Database</span></h2>
                <!-- æ–°å¢ï¼šå®šä½å¥ -->
                <p class="layer-context">ğŸ“ ä½ ç¾åœ¨åœ¨ã€Œè³‡æ–™èˆ‡æ²»ç†å±¤ã€ï¼šè³‡æ–™å„²å­˜å³ç®¡ç†ä»‹é¢</p>

                <div class="section-summary">äº”è¡¨åˆ†å·¥ï¼šä¸åªæ˜¯å­˜è³‡æ–™ï¼Œæ›´æ˜¯æ²»ç†ä»‹é¢ã€‚</div>

                <div class="visual-container">
                    <div class="svg-box" style="flex:2;">
                         <svg width="350" height="150" viewBox="0 0 350 150">
                            <g transform="translate(10,10)">
                                <rect width="100" height="30" fill="#E8F5E9" stroke="#2E7D32"/>
                                <text x="50" y="20" text-anchor="middle" font-size="10">Bookings (ä¸»æª”)</text>
                            </g>
                            <g transform="translate(130,10)">
                                <rect width="100" height="30" fill="#E8F5E9" stroke="#2E7D32"/>
                                <text x="50" y="20" text-anchor="middle" font-size="10">Allocations (ä½”ç”¨)</text>
                            </g>
                             <g transform="translate(70,60)">
                                <rect width="120" height="30" fill="#FFFDE7" stroke="#FBC02D"/>
                                <text x="60" y="20" text-anchor="middle" font-size="10">Capacity (æ²»ç†)</text>
                            </g>
                             <g transform="translate(10,110)">
                                <rect width="80" height="25" fill="#f5f5f5" stroke="#999"/>
                                <text x="40" y="17" text-anchor="middle" font-size="10">Config</text>
                            </g>
                             <g transform="translate(100,110)">
                                <rect width="80" height="25" fill="#f5f5f5" stroke="#999"/>
                                <text x="40" y="17" text-anchor="middle" font-size="10">Logs</text>
                            </g>
                        </svg>
                        <div class="svg-caption">SVG 08: äº”è¡¨çµæ§‹</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šGoogle Sheets å¦‚ä½•åŒæ™‚ä½œç‚ºè³‡æ–™åº«èˆ‡æ²»ç†ä»‹é¢</div>
                    </div>
                    <div class="svg-box">
                        <svg width="150" height="150" viewBox="0 0 150 150">
                            <rect x="25" y="30" width="100" height="40" fill="#e0f7fa" stroke="#006064"/>
                            <text x="75" y="55" text-anchor="middle" font-size="12">STD / PROJ</text>
                             <text x="75" y="90" text-anchor="middle" font-size="10">è‡ªå‹•åˆ†æµ</text>
                        </svg>
                        <div class="svg-caption">SVG 09: åˆ†æµæ©Ÿåˆ¶</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šç³»çµ±å¦‚ä½•è‡ªå‹•åˆ¤æ–·æ¨™æº–æ± èˆ‡å°ˆæ¡ˆæ± </div>
                    </div>
                </div>

                <div class="for-client">
                    <p><b>çµ¦ä¸»ç®¡çš„é‡é»ï¼š</b>æ‚¨æ“æœ‰éš¨æ™‚ä»‹å…¥çš„æ¬ŠåŠ›ã€‚</p>
                    <ul>
                        <li><b>æƒ³é–ä½æ™‚æ®µï¼Ÿ</b> å» CapacityWindows æŠŠä¸Šé™æ”¹ç‚º 0ã€‚</li>
                        <li><b>æƒ³æŸ¥æ˜¯èª°æ”¹çš„ï¼Ÿ</b> å» Backup_Log çœ‹ç´€éŒ„ã€‚</li>
                    </ul>
                </div>
            </section>

            <!-- CH 6: éƒ¨ç½²è·¯ç·šåœ– -->
            <section class="layer-general for-dev for-partner" id="sec-6">
                <h2>6. éƒ¨ç½²è·¯ç·šåœ– <span class="layer-tag">Deployment</span></h2>
                <div class="visual-container">
                    <div class="svg-box" style="flex:1;">
                         <svg width="300" height="60" viewBox="0 0 300 60">
                             <circle cx="30" cy="30" r="15" fill="#34A853"/> <text x="30" y="35" text-anchor="middle" fill="white" font-size="10">1</text>
                             <line x1="45" y1="30" x2="105" y2="30" stroke="#ccc"/>
                             <circle cx="120" cy="30" r="15" fill="#EA4335"/> <text x="120" y="35" text-anchor="middle" fill="white" font-size="10">2</text>
                             <line x1="135" y1="30" x2="195" y2="30" stroke="#ccc"/>
                             <circle cx="210" cy="30" r="15" fill="#4285F4"/> <text x="210" y="35" text-anchor="middle" fill="white" font-size="10">3</text>
                             
                             <text x="30" y="55" text-anchor="middle" font-size="8">å»º Sheet</text>
                             <text x="120" y="55" text-anchor="middle" font-size="8">éƒ¨ç½² GAS</text>
                             <text x="210" y="55" text-anchor="middle" font-size="8">ç¶å®š HTML</text>
                         </svg>
                        <div class="svg-caption">SVG 10: éƒ¨ç½²ä¸‰æ­¥é©Ÿ</div>
                        <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šå¾ç„¡åˆ°æœ‰çš„å»ºç½®é †åº</div>
                    </div>
                </div>
                <details>
                    <summary>è©³ç´°æ­¥é©Ÿæª¢æ ¸è¡¨</summary>
                    <div class="details-content">
                        <ol>
                            <li>å»ºç«‹ç©ºç™½ Sheetï¼ŒåŸ·è¡Œåˆå§‹åŒ–è…³æœ¬ã€‚</li>
                            <li>éƒ¨ç½² WebAppï¼Œæ¬Šé™è¨­ç‚º "Me" + "Anyone"ã€‚</li>
                            <li>è¤‡è£½ API URLï¼Œè²¼å…¥ HTML æª”æ¡ˆã€‚</li>
                            <li>é–‹å•Ÿ HTMLï¼Œæ¸¬è©¦é€å–®ã€‚</li>
                        </ol>
                        
                        <!-- æ–°å¢ï¼šå¤±æ•—å›å¾©é» -->
                        <div class="recovery-box">
                            <span class="recovery-title">ğŸ” å¦‚æœå¤±æ•—ï¼Œè«‹å›åˆ°é€™ä¸€æ­¥é‡æ–°æª¢æŸ¥ï¼š</span>
                            <ul class="recovery-list">
                                <li>Step 1 å¤±æ•— â†’ æª¢æŸ¥ Sheet çµæ§‹ / æ¬„ä½åç¨±æ˜¯å¦è¢«èª¤åˆª</li>
                                <li>Step 2 å¤±æ•— â†’ æª¢æŸ¥ WebApp éƒ¨ç½²æ¬Šé™æ˜¯å¦ç‚º "Anyone"</li>
                                <li>Step 3 å¤±æ•— â†’ æª¢æŸ¥ API_URL æ˜¯å¦æ­£ç¢ºç¶å®šåˆ° HTML ä¸­</li>
                            </ul>
                        </div>
                    </div>
                </details>
            </section>

            <!-- CH 7: åŸå§‹ç¢¼ä¸‹è¼‰ -->
            <section class="layer-general" id="sec-7">
                <h2>7. åŸå§‹ç¨‹å¼ç¢¼èˆ‡è³‡æ–™åº•ç¨¿ <span class="layer-tag">Resources</span></h2>
                
                <div style="text-align: center; padding: 40px;">
                    <div class="visual-container" style="justify-content: center;">
                        <div class="svg-box" style="border-style: solid; border-color: var(--g-blue);">
                             <svg width="60" height="60" viewBox="0 0 60 60">
                                 <path d="M30 5 L30 45 M15 30 L30 45 L45 30" stroke="#4285F4" stroke-width="5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                 <line x1="10" y1="55" x2="50" y2="55" stroke="#4285F4" stroke-width="5" stroke-linecap="round"/>
                             </svg>
                             <div class="svg-caption">SVG 11: ä¸‹è¼‰å€</div>
                             <div class="svg-intent">å–å¾—å®Œæ•´å¯è¤‡è£½çš„ç¨‹å¼ç¢¼èˆ‡æ“ä½œåº•ç¨¿</div>
                        </div>
                    </div>

                    <p>å®Œæ•´ç¨‹å¼ç¢¼ (Code.gs, Governance.gs, index.html) èˆ‡æ“ä½œæ‰‹å†Š PDF å·²æ‰“åŒ…ã€‚</p>
                    
                    <a href="https://www.google.com.tw" target="_blank" class="btn-download">ä¸‹è¼‰å®Œæ•´éƒ¨ç½²åŒ… (v2.0)</a>
                    
                    <p class="warning-text">
                        âš ï¸ æ³¨æ„ï¼šCanvas ç¶²é åƒ…ä¾›å°è®€ï¼Œä¸æä¾›å®Œæ•´å¯è¤‡è£½ä»£ç¢¼ã€‚<br>
                        è«‹ä¸‹è¼‰å¾Œåƒé–± doc/pdf èˆ‡åŠ å¯† zip æª”ã€‚
                    </p>
                </div>
            </section>

            <!-- CH 8: Roadmap -->
            <section class="layer-general" id="sec-8">
                <h2>8. Roadmap: é€™æ˜¯èµ·é»ï¼Œä¸æ˜¯çµ‚é» <span class="layer-tag">Future</span></h2>
                
                <div class="visual-container">
                     <div class="svg-box">
                         <svg width="300" height="80" viewBox="0 0 300 80">
                             <rect x="10" y="25" width="80" height="30" rx="5" fill="#E8F5E9" stroke="#34A853"/>
                             <text x="50" y="45" text-anchor="middle" font-size="10">MVP (æœ¬ç‰ˆ)</text>
                             
                             <line x1="90" y1="40" x2="120" y2="40" stroke="#999" marker-end="url(#arrow)"/>
                             
                             <rect x="120" y="25" width="80" height="30" rx="5" fill="#f5f5f5" stroke="#999"/>
                             <text x="160" y="45" text-anchor="middle" font-size="10">vNext (LINE)</text>

                             <line x1="200" y1="40" x2="230" y2="40" stroke="#999" marker-end="url(#arrow)"/>

                             <rect x="230" y="25" width="60" height="30" rx="5" fill="#f5f5f5" stroke="#999"/>
                             <text x="260" y="45" text-anchor="middle" font-size="10">Ent. (SQL)</text>
                         </svg>
                         <div class="svg-caption">SVG 12: æ¼”é€²è·¯ç·š</div>
                         <div class="svg-intent">é€™å¼µåœ–ä¸»è¦å¹«ä½ ç†è§£ï¼šMVP åªæ˜¯èµ·é»ï¼Œæœªä¾†å¯æ“´å……çš„æ–¹å‘</div>
                    </div>
                </div>

                <div class="for-client">
                    <p><b>æœªä¾†å¯æ“´å……ï¼š</b>LINE Notify é€šçŸ¥ã€Looker Studio æˆ°æƒ…å®¤ã€‚</p>
                </div>
                <div class="for-partner">
                     <p><b>æŠ€è¡“é·ç§»è·¯å¾‘ï¼š</b>GAS â†’ AWS Lambda / Python Flaskï¼›Sheets â†’ PostgreSQLã€‚</p>
                </div>
            </section>

        </main>

    </div>

    <!-- é å°¾ -->
    <footer>
        <p>&copy; 2026 Force Cheng (FALO). All rights reserved.</p>
        <p>æœ¬æ•™æåƒ…ä¾›å…§éƒ¨åŸ¹è¨“èˆ‡æˆæ¬Šå®¢æˆ¶ä½¿ç”¨ï¼Œåš´ç¦æœªç¶“æˆæ¬Šä¹‹è½‰å”®æˆ–åŸå§‹ç¢¼æ•£ä½ˆã€‚</p>
        <span class="footer-note">This material reflects the FALO approach to MVP delivery and governance-first system design.</span>
    </footer>

    <!-- è…³æœ¬ (JS) -->
    <script>
        // è§’è‰²è¨­å®šé‚è¼¯
        function setRole(role) {
            // 1. è¨­å®š Body Attribute (è§¸ç™¼ CSS è®Šæ›)
            document.body.setAttribute('data-role', role);

            // 2. æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
            document.querySelectorAll('.role-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('btn-' + role).classList.add('active');

            // 3. æ›´æ–°å´æ¬„èº«ä»½æ–‡å­—
            const roleNames = {
                'client': 'å®¢æˆ¶ / æ±ºç­–è€…',
                'partner': 'FALO å¤¥ä¼´ (å…§è¨“)',
                'dev': 'æŠ€è¡“å¯¦ä½œè€…'
            };
            const roleText = document.getElementById('role-text');
            if(roleText) roleText.textContent = roleNames[role];

            // 4. æ›´æ–°å°è®€å€å¡Šé¡¯ç¤º (CSS transition)
            document.querySelectorAll('.guide-box').forEach(box => box.classList.remove('active'));
            // å°å»¶é²è®“ CSS å‹•ç•«é †æš¢
            setTimeout(() => {
                const targetGuide = document.querySelector(`.guide-box.for-${role}`);
                if(targetGuide) targetGuide.classList.add('active');
            }, 50);

            // 5. è‡ªå‹•è™•ç† Details æŠ˜ç–Šç‹€æ…‹
            const allDetails = document.querySelectorAll('details');
            if (role === 'client') {
                // å®¢æˆ¶æ¨¡å¼ï¼šæŠ˜ç–Šå¤§éƒ¨åˆ†æŠ€è¡“ç´°ç¯€ï¼Œåªç•™ç¬¬ä¸€ç« 
                allDetails.forEach(d => d.removeAttribute('open'));
                document.querySelector('#sec-1 details')?.setAttribute('open', '');
            } else if (role === 'dev') {
                // é–‹ç™¼æ¨¡å¼ï¼šå…¨éƒ¨å±•é–‹
                allDetails.forEach(d => d.setAttribute('open', ''));
            } else {
                // å¤¥ä¼´æ¨¡å¼ï¼šé è¨­ç‹€æ…‹
                allDetails.forEach(d => d.removeAttribute('open'));
            }

            // 6. [NEW] åˆ‡æ›è§’è‰²æ™‚ï¼Œå¹³æ»‘æ²å‹•å›æœ€ä¸Šæ–¹
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // åˆå§‹åŒ–
        setRole('client');

        // ç°¡å–®çš„ Scroll Spy (æ›´æ–°å´æ¬„ Active ç‹€æ…‹)
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 150) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.sidebar a').forEach(a => {
                a.classList.remove('active');
                if (a.getAttribute('href').includes(current)) {
                    a.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>